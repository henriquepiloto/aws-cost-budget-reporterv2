<!DOCTYPE html>
<html>
<head>
    <title>Test Visual Config</title>
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --sidebar-color: #2c3e50;
        }
        body { 
            font-family: Arial, sans-serif; 
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        .sidebar { 
            width: 200px; 
            height: 300px; 
            background: var(--sidebar-color); 
            padding: 20px;
            border-radius: 10px;
            margin-right: 20px;
        }
        .content {
            background: white;
            color: black;
            padding: 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h3>Menu Lateral</h3>
        <p>Cor: <span id="sidebarColorValue">#2c3e50</span></p>
    </div>
    <div class="content">
        <h1 id="appName">Cloudinho</h1>
        <img id="logo" src="" alt="" style="max-height: 50px; display: none;">
        <p>Cor Primária: <span id="primaryColorValue">#667eea</span></p>
        <p>Cor Secundária: <span id="secondaryColorValue">#764ba2</span></p>
        <button onclick="loadVisualConfig()">Carregar Configurações</button>
    </div>

    <script>
        const API_URL = 'https://m153no51s0.execute-api.us-east-1.amazonaws.com/prod';
        let visualConfig = {};

        async function loadVisualConfig() {
            try {
                console.log('Loading visual config...');
                const response = await fetch(`${API_URL}/visual-config`);
                visualConfig = await response.json();
                console.log('Visual config loaded:', visualConfig);
                
                applyVisualConfig();
            } catch (error) {
                console.error('Failed to load visual config:', error);
            }
        }

        function applyVisualConfig() {
            const root = document.documentElement;
            const appName = visualConfig.app_name || 'Cloudinho';
            const logoUrl = visualConfig.logo_url || '';
            const primaryColor = visualConfig.primary_color || '#667eea';
            const secondaryColor = visualConfig.secondary_color || '#764ba2';
            const sidebarColor = visualConfig.sidebar_color || '#2c3e50';
            
            root.style.setProperty('--primary-color', primaryColor);
            root.style.setProperty('--secondary-color', secondaryColor);
            root.style.setProperty('--sidebar-color', sidebarColor);
            
            document.getElementById('appName').textContent = appName;
            document.getElementById('primaryColorValue').textContent = primaryColor;
            document.getElementById('secondaryColorValue').textContent = secondaryColor;
            document.getElementById('sidebarColorValue').textContent = sidebarColor;
            
            const logo = document.getElementById('logo');
            if (logoUrl) {
                logo.src = logoUrl;
                logo.style.display = 'block';
            } else {
                logo.style.display = 'none';
            }
        }

        // Load on page load
        window.onload = loadVisualConfig;
    </script>
</body>
</html>
